# 问题记录

1. navigator.mediaDevices.getUserMedia失败

vscode的终端运行`yarn dev`时，执行环境时`node`, 没有camera的权限，且不会主动唤起权限确认，因此报错。
解决办法：使用iTerm或者Terminal软件，运行`yarn dev`,会唤起权限确认。
> 参考资料:
> <https://github.com/ionic-team/capacitor/issues/2607>
> <https://github.com/electron/electron/issues/14801>

1. 打出来的包，显示`Unable to load preload script`

跟BrowserWindow的配置有关，设置

```javascript
mainWindow = new BrowserWindow({
    show: false,
    width: 1024,
    height: 728,
    fullscreen: true,
    webPreferences: {
      nodeIntegration: true
    }
  });
```

3. 新增分辨率筛选功能后，设备切换时画面并不会随着切换。
  原因： 为了进行分辨率筛选，创建了很多临时用的流， 这些流没有被关闭，所以影响了设备切换的main-stream更新。
